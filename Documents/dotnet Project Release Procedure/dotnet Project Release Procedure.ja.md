# .NET プロジェクトのリリース手順

## 設定

build_changed_projects.py と find_unpushed_commits.py に必要なパラメーター（ディレクトリーのパスなど）を設定する。

## リリース

アーカイブしたいプロジェクトの最新バージョンのソースファイルのアーカイブが存在しない状態にする。たとえば yyLib の最新バージョンが v0.3 なら、yyLib-v0.3-src.zip をなくす。通常、プログラムの更新時にはバージョン番号を上げる。それにより、そのバージョンに該当するソースファイルおよびバイナリーのアーカイブの生成が予定される。すでに存在するバージョンのアーカイブをつくり直したいなら、Explorer または Finder でアーカイブのタイムスタンプをチェックし、新しいアーカイブを消す。

### ソースコードの確定

* クローンしていないレポジトリーがないのを確認する
* cleanDesk などを実行し、非表示にされているディレクトリーとファイルを表示する
* find_unpushed_commits.py により、リモート側の差分を調べて取得する
* yyBom を実行し、エンコーディングや BOM に問題のあるファイルを修正する
* build_changed_projects.py を起動する
* "Build" コマンドにより、ビルドに成功するのを確認する
* "Update NuGet packages" コマンドを実行する
* find_unpushed_commits.py により、コミットやステージの忘れを処理する

### リビルドとアーカイブ

* "Rebuild and archive" コマンドを実行する
* ログの内容を確認する
* 作成されたアーカイブのファイル名や内容をプロジェクトごとに確認してステージする
* 不要なアーカイブ（クラスライブラリーやテスト用アプリのもの）を消す
* 更新した全てのプロジェクトのアーカイブが作成されたのを確認する
* レポジトリーのファイルをコミットおよびプッシュする
* find_unpushed_commits.py により、忘れている作業がないのを確認する

### Mac 版の作成

* クローンしていないレポジトリーがないのを確認する
* 上記の手順により、アーカイブまでを行う
* バイナリーが動作するのを確認する
* 不要なアーカイブを消す
* 必要なアーカイブをプッシュする
* find_unpushed_commits.py を確認する

### 後処理

* cleanDesk などを実行し、処理の終わっているディレクトリーとファイルを非表示にする
* それぞれのコンピューターに配置されているバイナリーと設定を更新する
* find_unpushed_commits.py を確認する
