<!DOCTYPE html>
<html>
    <head>
        <title>jpgOpt</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <style>@import url('https://fonts.googleapis.com/css2?family=M+PLUS+1&family=M+PLUS+1+Code&display=swap');body{margin:0;background-color:#111;color:#ddd;font-family:'M PLUS 1',sans-serif;font-size:1rem;line-height:1.5;overflow-wrap:break-word;word-wrap:break-word}a{color:#69c;text-decoration:underline}a:hover,a:active,a:focus{font-weight:bold}div.task,div.note,div.file,div.image{margin:10px;border:1px solid transparent}div.entries>div.note{border:1px solid #333}div.title{background-color:#538;padding:20px 30px;font-size:2rem;font-weight:bold}a.title{color:#ddd;text-decoration:none}a.title:hover,a.title:active,a.title:focus{text-decoration:underline}div.streaming{background-color:#131}div.streaming:hover{background-color:#353}div.done{background-color:#115}div.done:hover{background-color:#337}div.canceled{background-color:#511}div.canceled:hover{background-color:#733}div.task_contents{margin:10px 15px}span.task_contents{font-weight:bold}a.permalink{visibility:hidden}div.task:hover a.permalink{visibility:visible}div.note{background-color:#111}p.note_contents{margin:15px 20px}div.file{border:1px solid #333;background-color:#111;padding:15px 20px}div.image{border:1px solid #333;background-color:#111;padding:10px}img.image{box-sizing:border-box;vertical-align:top;max-width:100%}div.images{margin:10px;border:1px solid #333;background-color:#111;padding:10px;display:flex;justify-content:flex-start;gap:10px;flex-wrap:wrap}div.images>div.image{margin:0;border-style:none;padding:0}ul.files{margin:10px;border:1px solid #333;background-color:#111;padding-top:15px;padding-inline:40px 15px;padding-bottom:15px}div.note_ai_generated{margin:10px;border:1px solid transparent;background-color:#333}div.note_ai_generated>*{margin:15px 20px}div.note_ai_generated h1{font-size:2rem;font-weight:bold}div.note_ai_generated h2{font-size:1.8rem;font-weight:bold}div.note_ai_generated h3{font-size:1.6rem;font-weight:bold}div.note_ai_generated h4{font-size:1.4rem;font-weight:bold}div.note_ai_generated h5{font-size:1.2rem;font-weight:bold}div.note_ai_generated h6{font-size:1rem;font-weight:bold}pre{background-color:#555;padding:15px 20px;white-space:pre-wrap}code{font-family:'M PLUS 1 Code',monospace}</style>
    </head>
    <body>
        <div class="title">
            <a href="jpgOpt.htm" class="title">jpgOpt</a>
        </div>
        <div class="entries">
            <div class="note">
                <div class="note_contents">
                    <p class="note_contents">新しい携帯が Adobe RGB で写真を保存する。設定で変更できない。それを縮小化するにおいてメタデータを落とすと、色空間が分からなくなって、画像を表示したときに彩度が低下する。そのあたりの取り扱いについて、いろいろと学ぶ必要がある。</p>
                    <!-- Task: 1dd4d157-a983-4ce7-a1d3-bf8ed790b84d -->
                </div>
            </div>
            <div id="b10d21c7-c8af-4e1b-94e1-24041852e401" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">このタスクリストのログが出力されるようにする</span>
                    <a href="#b10d21c7-c8af-4e1b-94e1-24041852e401" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="f4b3a46f-2384-40ab-9395-164b2e6b6347" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">プロジェクト開始時のタスクをメモ通りに実行</span>
                    <a href="#f4b3a46f-2384-40ab-9395-164b2e6b6347" class="permalink">&infin;</a>
                </div>
            </div>
            <div class="note">
                <div class="note_contents">
                    <p class="note_contents">_imgLab を書き、各デバイスによる JPEG 画質や色空間などについて調べた。</p>
                    <p class="note_contents">Xiaomi の携帯の写真は、Adobe RGB になっていて、それを sRGB で表示するための ICC プロファイルが入っていて、色空間のプロパティーには値が設定されておらず、よって Windows のエクスプローラーでは「未調整」と表示されるようだ。</p>
                    <p class="note_contents">ICC プロファイルはちゃんとしているので、それに基づいて sRGB に変換する処理を Magick.NET により行えば、色空間のプロパティーごと Exif や ICC プロファイルを落としても正確に表示される。</p>
                    <!-- Task: dde8bf33-7603-432e-988b-9315ec238753 -->
                </div>
            </div>
            <div id="53196428-4249-44d4-aa33-df7e50414145" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">WPF での開発に切り替える → Avalonia UI</span>
                    <a href="#53196428-4249-44d4-aa33-df7e50414145" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">コンソールでつくる考えだったが、カメラや携帯によって彩度があまりに異なる。α によるものは、高画質だが、そのままではとてもつまらない。彩度だけは自分で選べないといけない。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">Avalonia UI でつくることに変更。</p>
                            <p class="note_contents">WPF と VSC は相性が悪い。間違いなく存在するメソッドやプロパティーを見つけられず、コーディング支援が動かない。Visual Studio では動くし、どちらでもコンパイルはできる。</p>
                            <p class="note_contents">VSC で Dotnet: Prefer CSharp Extension をオンにすれば、C# Dev Kit より C# の拡張機能が強めに働き、識別子が見つかるが、VSC が VS くらい C# での開発に最適化されているのが無効になり、たとえるなら「エディターとコマンドラインのコンパイラー」のようになり、ビルドの構成などを設定ファイルで自分が行うことになる。</p>
                            <p class="note_contents">開発コストはさほど異ならないので、Avalonia UI でつくり、Mac でも使えるのが合理的。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="ce1edc2c-22a8-4fd0-b10a-f66c4d75119d" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">シャープネスを上げるかどうかを指定できるようにする</span>
                    <a href="#ce1edc2c-22a8-4fd0-b10a-f66c4d75119d" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">やりすぎると良くないので adaptive sharpen をデフォルトのパラメーターで。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="e4bd8b01-673f-4b48-9350-83e9ba781880" class="task canceled">
                <div class="task_contents">&cross;
                    <span class="task_contents">ウォーターマークを入れられるようにする</span>
                    <a href="#e4bd8b01-673f-4b48-9350-83e9ba781880" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="0214b831-e351-4f6f-9c5d-db8e9eff4b03" class="task canceled">
                <div class="task_contents">&cross;
                    <span class="task_contents">3種類のアウトプットを可能にする</span>
                    <a href="#0214b831-e351-4f6f-9c5d-db8e9eff4b03" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">たとえば、彩度を上げてシャープネスをかけただけの原板サイズの高画質のもの、それを縮小化し、画質75にしたもの。三つあればたいてい足りる。一つ目だけ出力して別アプリで縮小化しても面倒でないが、二度手間だし、二度の圧縮になるのがずっと少しだけ気になるかもしれない。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">Exif をどうするかは、こちらでやること。残す場合も ICC プロファイルとサムネイルは落ちるように。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="c83de6bf-df17-456c-99b6-6685ff19de03" class="task canceled">
                <div class="task_contents">&cross;
                    <span class="task_contents">ウォーターマークの入れ方を増やしていけるようにする</span>
                    <a href="#c83de6bf-df17-456c-99b6-6685ff19de03" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="37a3ea0c-e524-43b1-977f-910c8750c964" class="task canceled">
                <div class="task_contents">&cross;
                    <span class="task_contents">外部エディターを三つまで登録できてボタンで起動できるようにする</span>
                    <a href="#37a3ea0c-e524-43b1-977f-910c8750c964" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">ボタン一つで Photoshop や GIMP を起動したい。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="34c53bf3-8114-41f4-a0cc-8a765d714a63" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">Exif を落とすか残すか指定できるようにする</span>
                    <a href="#34c53bf3-8114-41f4-a0cc-8a765d714a63" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="401fcfc5-5482-425e-853f-959d900637a9" class="task canceled">
                <div class="task_contents">&cross;
                    <span class="task_contents">中央に原板、左右に彩度を上げたものと下げたものを表示し、段階的に上下できるようにする</span>
                    <a href="#401fcfc5-5482-425e-853f-959d900637a9" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">ワンクリックで選べた方が楽なので、上下3段階くらいまで小さく表示し、「これだ」でクリックできてもよいか。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">これは、1枚ずつプレビューを表示して処理する予定だった頃の仕様。問題はバランスだと理解し、3倍めんどくさいが、サムネイルビューを実装している。同じセッションの写真でも、携帯はそこそこ鮮やかで、GoPro はやりすぎなくらいで、α は自然。それらのバランスをある程度は整えたい。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="c73396d6-cbe9-4e13-ae06-9a0bc33bd6d5" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">キューに何枚あり、処理中は何枚で、終わったものは何枚かを表示</span>
                    <a href="#c73396d6-cbe9-4e13-ae06-9a0bc33bd6d5" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">リストでサムネイルを表示し、前後に移動したり、パラメーターを変えてやり直したりができるのが普通だが、個人用のツールだし、すぐに必要なものなので、そこは手を抜く。たかが写真という考えを意識的に持ちたい。つまり、行動こそが大事。写真は、そこからの副産物。それに適した「ちょうど良い後処理」を目指すツール。</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
