<!DOCTYPE html>
<html>
    <head>
        <title>yyTodoMail</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <style>@import url('https://fonts.googleapis.com/css2?family=M+PLUS+1&family=M+PLUS+1+Code&display=swap');body{margin:0;background-color:#111;color:#ddd;font-family:'M PLUS 1',sans-serif;font-size:1rem;line-height:1.5;overflow-wrap:break-word;word-wrap:break-word}a{color:#69c;text-decoration:underline}a:hover,a:active,a:focus{font-weight:bold}div.task,div.note,div.file,div.image{margin:10px;border:1px solid transparent}div.entries>div.note{border:1px solid #333}div.title{background-color:#538;padding:20px 30px;font-size:2rem;font-weight:bold}a.title{color:#ddd;text-decoration:none}a.title:hover,a.title:active,a.title:focus{text-decoration:underline}div.streaming{background-color:#131}div.streaming:hover{background-color:#353}div.done{background-color:#115}div.done:hover{background-color:#337}div.canceled{background-color:#511}div.canceled:hover{background-color:#733}div.task_contents{margin:10px 15px}span.task_contents{font-weight:bold}a.permalink{visibility:hidden}div.task:hover a.permalink{visibility:visible}div.note{background-color:#111}p.note_contents{margin:15px 20px}div.file{border:1px solid #333;background-color:#111;padding:15px 20px}div.image{border:1px solid #333;background-color:#111;padding:10px}img.image{box-sizing:border-box;vertical-align:top;max-width:100%}div.images{margin:10px;border:1px solid #333;background-color:#111;padding:10px;display:flex;justify-content:flex-start;gap:10px;flex-wrap:wrap}div.images>div.image{margin:0;border-style:none;padding:0}ul.files{margin:10px;border:1px solid #333;background-color:#111;padding-top:15px;padding-inline:40px 15px;padding-bottom:15px}div.note_ai_generated{margin:10px;border:1px solid transparent;background-color:#333}div.note_ai_generated>*{margin:15px 20px}div.note_ai_generated h1{font-size:2rem;font-weight:bold}div.note_ai_generated h2{font-size:1.8rem;font-weight:bold}div.note_ai_generated h3{font-size:1.6rem;font-weight:bold}div.note_ai_generated h4{font-size:1.4rem;font-weight:bold}div.note_ai_generated h5{font-size:1.2rem;font-weight:bold}div.note_ai_generated h6{font-size:1rem;font-weight:bold}pre{background-color:#555;padding:15px 20px;white-space:pre-wrap}code{font-family:'M PLUS 1 Code',monospace;font-size:1rem;line-height:1.5}</style>
    </head>
    <body>
        <div class="title">
            <a href="yyTodoMail.htm" class="title">yyTodoMail</a>
        </div>
        <div class="entries">
            <div class="note">
                <div class="note_contents">
                    <p class="note_contents">yyTodoMailSenderWpf というものをパッと書いた。とにかく夫婦間のタスク共有を改善したくての雑なツール。</p>
                    <p class="note_contents">Asana などを使うのでも良かったが、yyLib のベースを作り、ChatGPT にアクセスする yyGpt をまとめ、MailKit/MimeKit を使う yyMail を作り……という遠回りの方が、いずれ自社のシステムやアプリを揃えたい自分にとっては近道。</p>
                    <p class="note_contents">そもそも既製品を使っては、そちらが便利なのは分かりきっていて、自分のコードベースを整えていく意欲が減衰する。</p>
                    <p class="note_contents">出国直前に4日で計47時間ほどプログラミングをしたようだ。やはり小規模のツールでも10時間は掛かり、中規模だと100時間からになるようだ。</p>
                    <!-- Task: 03f79484-a8c4-459c-937f-7f799b23d793 -->
                </div>
            </div>
            <div class="note">
                <div class="note_contents">
                    <p class="note_contents">出国直前に急いだのは、これから1ヶ月ほど親族に会いにロシアに行くため。ロシアでは ChatGPT も Facebook も LINE も使えない。VPN 対策も強化されていると聞く。yyGpt を作り込むのが本来の目的で、それだけではつまらないので TODO メールを送るツールを仕上げた。</p>
                    <!-- Task: 03f79484-a8c4-459c-937f-7f799b23d793 -->
                </div>
            </div>
            <div class="note">
                <div class="note_contents">
                    <p class="note_contents">ChatGPT を使うコードを見ると、そのほとんどが「しばらく待って、いきなりドバッと」だ。それだと使いにくいので、トークン単位でじわじわと出力する方法を調べた。けっこうめんどくさい処理なのをライブラリー化できた。VPN が動けばロシアで、そうでなければ帰国後にコードを洗練し、エラーが出尽くしたら自社のシステムやアプリに組み込む。</p>
                    <!-- Task: 03f79484-a8c4-459c-937f-7f799b23d793 -->
                </div>
            </div>
            <div id="27013573-8568-4d05-9c67-98fd0ec695ac" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">初回起動時のエラーメッセージについて調べる</span>
                    <a href="#27013573-8568-4d05-9c67-98fd0ec695ac" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">JSON ファイルを作りながら起動する。最初は四つ一気に作られていたが、今では二つ、一つ、一つと作られる。つまり、二つ作った時点でエラーになる。アプリを再起動すると、次は一つだけ作られてエラーになる。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="bac24741-ecbd-47d5-ac7e-413b894eceea" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">翻訳された本文が空でも直後に境界線が入るのを修正</span>
                    <a href="#bac24741-ecbd-47d5-ac7e-413b894eceea" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="69bf708a-86f2-41dd-b712-3f1626b0afd2" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">ChatGPT が反応しないときのエラーメッセージを改善</span>
                    <a href="#69bf708a-86f2-41dd-b712-3f1626b0afd2" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">&#39;str&#39; がどうのこうのというメッセージが出る。自分のデバッグにはそれで十分だが、ユーザーには分かりにくい。</p>
                            <p class="note_contents">また、もうちょっと情報がないと不便がある。あらゆるケースを追えているのか分からない。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">yyGptLib が &#39;str&#39; の内容を表示するようにした。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="e2566a4e-2b87-4c15-81f9-cb2c4b371b30" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">最近のエラーメッセージをチェック</span>
                    <a href="#e2566a4e-2b87-4c15-81f9-cb2c4b371b30" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">ChatGPT が禁止されているロシアに来て、VPN でいろいろな国につないで API を使っている。つなぎ忘れての操作ではたいてい落ちるし、東京のサーバーにつないでいても（それまでにユーザーを一意に特定されてか）落ちたことがある。良くも悪くも、質の高いエラーメッセージを得られている。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">サーバーからのレスポンスをそのまま保存する実装に改めて内容をチェックしたところ、全てが「ロシアでは ChatGPT を使えません」関連だった。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="7475f7f0-46a2-4158-b5f8-2f1125e18102" class="task canceled">
                <div class="task_contents">&cross;
                    <span class="task_contents">ChatGPT 以外による翻訳も可能にする</span>
                    <a href="#7475f7f0-46a2-4158-b5f8-2f1125e18102" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">日常的に API が落ちている。信頼性が低い。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">Google からも Gemini が出てきたわけで、バックエンドの API をニーズに基づいて切り替えるのが当たり前の時代に。しかし、ChatGPT による翻訳も精度が十分に高く、今すぐにするべきは、ChatGPT ベースの決め打ちでよいから機能性を満たすこと。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="53478c7c-b5b0-4a55-a748-5ee4985a0cc7" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">サーバーとの全てのやり取りをその都度出力するモードを実装</span>
                    <a href="#53478c7c-b5b0-4a55-a748-5ee4985a0cc7" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">yyGptLib の更新により実現した。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="4927fa2d-f665-446b-89a7-aa89c0ab1bce" class="task canceled">
                <div class="task_contents">&cross;
                    <span class="task_contents">翻訳と送信を一つのボタンで行えるようにする</span>
                    <a href="#4927fa2d-f665-446b-89a7-aa89c0ab1bce" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">VPN が知らないうちにオフになっているとか、途中までは翻訳できたが API が止まったとかにより、そのまま送るに適さない翻訳文が得られることがある。5～10秒の待ち時間がもったいないが、しばらくは翻訳の結果を待ってからの送信であるべき。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="c7427701-1e21-49e1-8d8d-62c8ea00de51" class="task canceled">
                <div class="task_contents">&cross;
                    <span class="task_contents">送信先を強調表示</span>
                    <a href="#c7427701-1e21-49e1-8d8d-62c8ea00de51" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">最初、奥さんに送るはずのものを自分向けのところに入力し、翻訳したことで、書くところを間違ったことに気付くということが何度かあったが、すぐにそういうミスはなくなった。</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
