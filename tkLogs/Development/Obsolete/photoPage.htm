<!DOCTYPE html>
<html>
    <head>
        <title>photoPage</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <style>@import url('https://fonts.googleapis.com/css2?family=M+PLUS+1&family=M+PLUS+1+Code&display=swap');body{margin:0;background-color:#111;color:#ddd;font-family:'M PLUS 1',sans-serif;font-size:1rem;line-height:1.5;overflow-wrap:break-word;word-wrap:break-word}a{color:#69c;text-decoration:underline}a:hover,a:active,a:focus{font-weight:bold}div.task,div.note,div.file,div.image{margin:10px;border:1px solid transparent}div.entries>div.note{border:1px solid #333}div.title{background-color:#538;padding:20px 30px;font-size:2rem;font-weight:bold}a.title{color:#ddd;text-decoration:none}a.title:hover,a.title:active,a.title:focus{text-decoration:underline}div.streaming{background-color:#131}div.streaming:hover{background-color:#353}div.done{background-color:#115}div.done:hover{background-color:#337}div.canceled{background-color:#511}div.canceled:hover{background-color:#733}div.task_contents{margin:10px 15px}span.task_contents{font-weight:bold}a.permalink{visibility:hidden}div.task:hover a.permalink{visibility:visible}div.note{background-color:#111}p.note_contents{margin:15px 20px}div.file{border:1px solid #333;background-color:#111;padding:15px 20px}div.image{border:1px solid #333;background-color:#111;padding:10px}img.image{box-sizing:border-box;vertical-align:top;max-width:100%}div.images{margin:10px;border:1px solid #333;background-color:#111;padding:10px;display:flex;justify-content:flex-start;gap:10px;flex-wrap:wrap}div.images>div.image{margin:0;border-style:none;padding:0}ul.files{margin:10px;border:1px solid #333;background-color:#111;padding-top:15px;padding-inline:40px 15px;padding-bottom:15px}div.note_ai_generated{margin:10px;border:1px solid transparent;background-color:#333}div.note_ai_generated>*{margin:15px 20px}div.note_ai_generated h1{font-size:2rem;font-weight:bold}div.note_ai_generated h2{font-size:1.8rem;font-weight:bold}div.note_ai_generated h3{font-size:1.6rem;font-weight:bold}div.note_ai_generated h4{font-size:1.4rem;font-weight:bold}div.note_ai_generated h5{font-size:1.2rem;font-weight:bold}div.note_ai_generated h6{font-size:1rem;font-weight:bold}pre{background-color:#555;padding:15px 20px;white-space:pre-wrap}code{font-family:'M PLUS 1 Code',monospace;font-size:1rem;line-height:1.5}</style>
    </head>
    <body>
        <div class="title">
            <a href="photoPage.htm" class="title">photoPage</a>
        </div>
        <div class="entries">
            <div class="note">
                <div class="note_contents">
                    <p class="note_contents">動的なシステムにおいて、撮影日ごとにページを作れて、そこに複数の関係者が写真やビデオをアップロードできるのがスタンダードな仕様だろうが、一人が全て載せて、関係者は閲覧とダウンロードのみの静的ページも、サーバーを選ばない点において便利。まずは、そのうち後者を生成できるようにする。</p>
                    <!-- Task: d57932d6-8149-4f04-b98f-8421363f90fa -->
                </div>
            </div>
            <div id="c385ec82-ccd2-46e3-ba3b-d9aa2fd337b3" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">名前を決める</span>
                    <a href="#c385ec82-ccd2-46e3-ba3b-d9aa2fd337b3" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">おそらく自分以外に誰も使わないソフトだが、公開しない理由もなくて公開レポジトリーにする。</p>
                            <p class="note_contents">名前もどうでもいいので photoPage と。大昔に同じ名前で同じようなソフトを書いた気がする。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="55d0f079-959b-4c76-b06d-57f42a0e5ede" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">レポジトリーを作成</span>
                    <a href="#55d0f079-959b-4c76-b06d-57f42a0e5ede" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="a018411b-d21d-4db2-b2ad-9363526f3e33" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">ソリューションを作成</span>
                    <a href="#a018411b-d21d-4db2-b2ad-9363526f3e33" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="948e2cba-7447-4a7b-a8f8-80225ca6948f" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">.gitignore を作る</span>
                    <a href="#948e2cba-7447-4a7b-a8f8-80225ca6948f" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="d5b37f82-b9e4-4b84-896b-efc53fdc6dbf" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">レポジトリーをクローン</span>
                    <a href="#d5b37f82-b9e4-4b84-896b-efc53fdc6dbf" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="9a245dfe-bc94-495d-92a0-1a67c35e91ff" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">.git ディレクトリーなどを非表示にする</span>
                    <a href="#9a245dfe-bc94-495d-92a0-1a67c35e91ff" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="18dc61fe-c1b9-4144-a026-083acd9cc655" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">アセンブリー情報を設定</span>
                    <a href="#18dc61fe-c1b9-4144-a026-083acd9cc655" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="70031e40-edb0-4ebd-b5ec-77120df3c1a7" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">プロパティーをチェック</span>
                    <a href="#70031e40-edb0-4ebd-b5ec-77120df3c1a7" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="dde848a3-9b78-474d-b617-4c9f9de769ee" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">全てのファイルをチェック</span>
                    <a href="#dde848a3-9b78-474d-b617-4c9f9de769ee" class="permalink">&infin;</a>
                </div>
            </div>
            <div class="note">
                <div class="note_contents">
                    <p class="note_contents">ビデオを扱わない。ZIP ファイルにまとめる仕様との親和性が低いし、撮影日時の取得がややこしいため。</p>
                    <p class="note_contents">そのうち後者については、たとえば GoPro のビデオを USB ケーブルで転送すると、ファイル内にメタデータとしては撮影日時が入るが、ファイルシステム上のタイムスタンプは転送日時になる。一方、カメラによってはメタデータが全く入らない。メタデータとファイルシステム上のデータが一致しない場合の想定も必要。</p>
                    <!-- Task: d57932d6-8149-4f04-b98f-8421363f90fa -->
                </div>
            </div>
            <div class="note">
                <div class="note_contents">
                    <p class="note_contents">ビデオについてまだ考えている。</p>
                    <p class="note_contents">ユーザー側の利点は、もちろんビデオも含まれるページの方が大きい。</p>
                    <p class="note_contents">しかし、動画形式がいろいろあってそれぞれに対応しなければならないし、自分が借りているサーバーからのダウンロード速度がそれほど出ないので再生時のカクつきなどが想定されるし、サムネイルを特定のフレームにするのか、複数のフレームをまとめたものにするのか、ユーザーが選んだフレームにできるようにするのかの問題もある。</p>
                    <p class="note_contents">YouTube に載せたビデオをページに埋め込むのも選択肢だが、それでは「原版を渡す」というコンセプトと一致しない。</p>
                    <p class="note_contents">となると、オンラインストレージに載せてのディレクトリー単位の共有が現実的だ。実際、以前に写真の共有が必要だったときには最初から OneDrive を使った。</p>
                    <p class="note_contents">しかし、OneDrive では相手が開けなかった。こちらではどのブラウザーでも可能で、ログオンが不要のページだったのでシークレットモードでも開けて、相手が開けない理由が不明だったが、目上の方なのでプッシュできず、そのときだけ WeTransfer を使った。</p>
                    <p class="note_contents">YouTube は誰でも開けるだろうから、「誰でもいける」というのを重視するなら、</p>
                    <p class="note_contents">* 写真は photoPage で静的ページに<br />
                        * ビデオは YouTube に<br />
                        * ビデオの原版を要求されたら、まずはオンラインストレージを試し、どうしてもダメなら USB メモリーを郵送</p>
                    <p class="note_contents">くらいの考え方でよさそう。</p>
                    <!-- Task: d57932d6-8149-4f04-b98f-8421363f90fa -->
                </div>
            </div>
            <div id="8cd38ce0-9305-4a57-8f80-455b955c6f86" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">viewport を入れる</span>
                    <a href="#8cd38ce0-9305-4a57-8f80-455b955c6f86" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="a949489c-9c90-4031-877d-9ffbb42cda10" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">各部でファイルの上書きが可能か確認</span>
                    <a href="#a949489c-9c90-4031-877d-9ffbb42cda10" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="08425634-2a3f-4130-8d6a-630821617cf9" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">元々のファイル名が衝突するケースに対処</span>
                    <a href="#08425634-2a3f-4130-8d6a-630821617cf9" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="27ef3525-0b35-4853-95f5-e165db45f1f1" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">実装</span>
                    <a href="#27ef3525-0b35-4853-95f5-e165db45f1f1" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">コンソールアプリケーションで WPF の機能を使うには、</p>
                            <p class="note_contents">&lt;OutputType&gt;Exe&lt;/OutputType&gt;<br />
                                &lt;TargetFramework&gt;net6.0-windows&lt;/TargetFramework&gt;<br />
                                &lt;UseWPF&gt;True&lt;/UseWPF&gt;</p>
                            <p class="note_contents">のようにする。</p>
                            <p class="note_contents">IDE におけるプロジェクトの「プロパティー」で「出力の種類」を「Windows アプリケーション」にしないと「このプロジェクトで WPF を有効にします」のチェックボックスが出ない。</p>
                            <p class="note_contents">しかし、そうすると OutputType が WinExe に変わるので、Exe に戻す。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="19608346-7486-4720-a939-3e367b7ba90d" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">ページの各部の文字列が長い場合の折り返しをテスト</span>
                    <a href="#19608346-7486-4720-a939-3e367b7ba90d" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">最初、「●」をたくさん並べたものの折り返しがされず、とまどった。「あ」などと同じ CJK 文字だが、内部的には記号扱いされるようで、単語中（？）での折り返しを有効にしないと横一列に並ぶ。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="c08364a3-6663-459d-b305-b9ed05f96c6b" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">それぞれの条件分岐における取得データが正しいのを確認</span>
                    <a href="#c08364a3-6663-459d-b305-b9ed05f96c6b" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="5c31888f-ea69-4c97-88db-a0ff683350e9" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">時差やロケールが影響しないのを確認</span>
                    <a href="#5c31888f-ea69-4c97-88db-a0ff683350e9" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="c7c38a3c-fa89-4775-94c0-e17cdf08495d" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">各部でリソースの破棄ができているか確認</span>
                    <a href="#c7c38a3c-fa89-4775-94c0-e17cdf08495d" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="052d4af9-b66a-4e4b-965b-a38424605fa4" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">携帯で表示をテスト</span>
                    <a href="#052d4af9-b66a-4e4b-965b-a38424605fa4" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="84e4bb4b-121e-4838-90c4-8395ce585225" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">Mac の Safari で表示をテスト</span>
                    <a href="#84e4bb4b-121e-4838-90c4-8395ce585225" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="409761a6-fb1f-4717-b883-d6b40759307c" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">Chrome の携帯モードで表示をテスト</span>
                    <a href="#409761a6-fb1f-4717-b883-d6b40759307c" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="09e4cc41-6547-4125-b818-e0fd95f166bb" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">落ちるところがないようにする</span>
                    <a href="#09e4cc41-6547-4125-b818-e0fd95f166bb" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="efea1654-513d-43a6-933b-e21cd509b076" class="task canceled">
                <div class="task_contents">&cross;
                    <span class="task_contents">html タグに lang 属性を入れる</span>
                    <a href="#efea1654-513d-43a6-933b-e21cd509b076" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">言語ごとにフォントの設定の初期値が異なる。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">Mac の Chrome でキリル文字が全角表示されたので入れてみたが、改善しなかった。フォントの方を Verdana にすれば改善した。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="85824fb5-da03-40a4-b4e9-1d9ae699704e" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">Verdana フォントを指定</span>
                    <a href="#85824fb5-da03-40a4-b4e9-1d9ae699704e" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="a3404ae2-b365-44d2-8727-fc34571179bd" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">フォントサイズや行の高さの指定について復習</span>
                    <a href="#a3404ae2-b365-44d2-8727-fc34571179bd" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="4c7ad8e5-ac73-439f-8c18-fe680803ddc8" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">DOCTYPE について復習</span>
                    <a href="#4c7ad8e5-ac73-439f-8c18-fe680803ddc8" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">主に必要性について。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">なくても動くが作法だと。入れない理由もないので今後は入れる。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="a4252200-c2dd-42c5-bb2a-bbfc827db76a" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">DOCTYPE を入れる</span>
                    <a href="#a4252200-c2dd-42c5-bb2a-bbfc827db76a" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="a6156548-8e25-4042-88ad-8332d0f8d026" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">ページにおける文字列の折り返しについて復習</span>
                    <a href="#a6156548-8e25-4042-88ad-8332d0f8d026" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">折り返すのかどうかと、折り返す場合どこで折り返すのかを、以下のプロパティーによりああだこうだするのが今の CSS のようだ。</p>
                            <p class="note_contents">white-space - CSS: Cascading Style Sheets | MDN<br />
                                <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/white-space" target="_blank" class="url">https://developer.mozilla.org/en-US/docs/Web/CSS/white-space</a></p>
                            <p class="note_contents">overflow-wrap - CSS: Cascading Style Sheets | MDN<br />
                                <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/overflow-wrap" target="_blank" class="url">https://developer.mozilla.org/en-US/docs/Web/CSS/overflow-wrap</a></p>
                            <p class="note_contents">line-break - CSS: Cascading Style Sheets | MDN<br />
                                <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/line-break" target="_blank" class="url">https://developer.mozilla.org/en-US/docs/Web/CSS/line-break</a></p>
                            <p class="note_contents">word-break - CSS: Cascading Style Sheets | MDN<br />
                                <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/word-break" target="_blank" class="url">https://developer.mozilla.org/en-US/docs/Web/CSS/word-break</a></p>
                            <p class="note_contents">hyphens - CSS: Cascading Style Sheets | MDN<br />
                                <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/hyphens" target="_blank" class="url">https://developer.mozilla.org/en-US/docs/Web/CSS/hyphens</a></p>
                            <p class="note_contents">さらに word-wrap を以前は目にした記憶がある。これは、IE が独自に実装したもので、その後、overflow-wrap に変更されたとのこと。入れて問題のあるものでなく、overflow-wrap を指定するなら互換性のために添えておくべきものか。</p>
                            <p class="note_contents">word-wrap－スタイルシートリファレンス<br />
                                <a href="https://www.htmq.com/style/word-wrap.shtml" target="_blank" class="url">https://www.htmq.com/style/word-wrap.shtml</a></p>
                            <p class="note_contents">CSS - overflow-wrap - とほほのWWW入門<br />
                                <a href="https://www.tohoho-web.com/css/prop/overflow-wrap.htm" target="_blank" class="url">https://www.tohoho-web.com/css/prop/overflow-wrap.htm</a></p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="18228166-d3df-4c5e-a9dc-e7267bb9ea70" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">空タグの後ろの方の / の必要性について調べる</span>
                    <a href="#18228166-d3df-4c5e-a9dc-e7267bb9ea70" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">検証サービスが「なくてよい」と言ってきた。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">HTML5 の仕様では、</p>
                            <p class="note_contents">&lt;area&gt;<br />
                                &lt;base&gt;<br />
                                &lt;br&gt;<br />
                                &lt;col&gt;<br />
                                &lt;embed&gt;<br />
                                &lt;hr&gt;<br />
                                &lt;img&gt;<br />
                                &lt;input&gt;<br />
                                &lt;keygen&gt;<br />
                                &lt;link&gt;<br />
                                &lt;meta&gt;<br />
                                &lt;param&gt;<br />
                                &lt;source&gt;<br />
                                &lt;track&gt;<br />
                                &lt;wbr&gt;</p>
                            <p class="note_contents">のみが empty elements とのこと。</p>
                            <p class="note_contents">Empty HTML Tags (21 Weird Things You Need To Know!)<br />
                                <a href="https://matthewjamestaylor.com/empty-tags" target="_blank" class="url">https://matthewjamestaylor.com/empty-tags</a></p>
                            <p class="note_contents">自分は、どんなタグも空なら &lt;*/&gt; と書けると思い、&lt;td/&gt; や &lt;div class=&quot;...&quot;/&gt; をよく書いていた。そのうち後者は、大きさや色を指定してデザインの一部として使うのが便利だったと思う。</p>
                            <p class="note_contents">しかし、empty（たりえる）elements が仕様で決まっていて、これらが空なのは「閉じタグ忘れ」とは見なされないようだ。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="70709d27-d8cb-43fd-aa78-730155fecb10" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">box-sizing について復習</span>
                    <a href="#70709d27-d8cb-43fd-aa78-730155fecb10" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">box-sizing - CSS: Cascading Style Sheets | MDN<br />
                                <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing" target="_blank" class="url">https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing</a></p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="15f86336-d1d1-4ebd-9e77-50f36692e2fe" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">HTML の各部における文字のエスケープをチェック</span>
                    <a href="#15f86336-d1d1-4ebd-9e77-50f36692e2fe" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">href の値が難しい。</p>
                            <p class="note_contents">たとえば</p>
                            <p class="note_contents">* hoge: 0<br />
                                * moge: 1&amp;2</p>
                            <p class="note_contents">を URL に含める場合、</p>
                            <p class="note_contents">?hoge=0&amp;amp;moge=1%262</p>
                            <p class="note_contents">まで変換する必要性が本当にあるか。</p>
                            <p class="note_contents">html - Do I encode ampersands in &lt;a href...&gt;? - Stack Overflow<br />
                                <a href="https://stackoverflow.com/questions/3705591/do-i-encode-ampersands-in-a-href" target="_blank" class="url">https://stackoverflow.com/questions/3705591/do-i-encode-ampersands-in-a-href</a></p>
                            <p class="note_contents">validation - Which characters make a URL invalid? - Stack Overflow<br />
                                <a href="https://stackoverflow.com/questions/1547899/which-characters-make-a-url-invalid" target="_blank" class="url">https://stackoverflow.com/questions/1547899/which-characters-make-a-url-invalid</a></p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">&lt; &gt; &amp; &quot; &#39;</p>
                            <p class="note_contents">を WebUtility.UrlEncode と WebUtility.HtmlEncode で処理したところ、</p>
                            <p class="note_contents">%3C+%3E+%26+%22+%27<br />
                                &amp;lt; &amp;gt; &amp;amp; &amp;quot; &amp;#39;</p>
                            <p class="note_contents">が得られた。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">Sure, spaces in an ˂a href˃ or ˂img src˃ make it i... - Marketing Nation<br />
                                <a href="https://nation.marketo.com/t5/product-blogs/sure-spaces-in-an-a-href-or-img-src-make-it-invalid-but-invalid/ba-p/319740" target="_blank" class="url">https://nation.marketo.com/t5/product-blogs/sure-spaces-in-an-a-href-or-img-src-make-it-invalid-but-invalid/ba-p/319740</a></p>
                            <p class="note_contents">Spaces in Link and Image URL/URI (HTML Encoding)<br />
                                <a href="https://www.arclab.com/en/kb/htmlcss/uri-url-encoding-spaces-in-links-href-img-src.html" target="_blank" class="url">https://www.arclab.com/en/kb/htmlcss/uri-url-encoding-spaces-in-links-href-img-src.html</a></p>
                            <p class="note_contents">次のページの、少し下にスクロールしたところには、</p>
                            <p class="note_contents">&lt;a href=&quot;?bill&amp;ted&quot;&gt;Bill and Ted&lt;/a&gt; &lt;!-- &amp;ted is ok, since it&#39;s not a named character reference --&gt;<br />
                                &lt;a href=&quot;?art&amp;amp;copy&quot;&gt;Art and Copy&lt;/a&gt; &lt;!-- the &amp; has to be escaped, since &amp;copy is a named character reference --&gt;</p>
                            <p class="note_contents">という例がある。</p>
                            <p class="note_contents">HTML Standard<br />
                                <a href="https://html.spec.whatwg.org/multipage/introduction.html#syntax-errors" target="_blank" class="url">https://html.spec.whatwg.org/multipage/introduction.html#syntax-errors</a></p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">クエリー文字列をそのまま表示するページを作ってみた。&quot;&quot; なら &quot;(Empty)&quot; になる。</p>
                            <p class="note_contents">なんとなく ?a なら null: a のイメージだったが、キーのみと解釈されるようなので注意が必要。</p>
                            <p class="note_contents">処理としては、&amp; はあくまで「ペアの区切り」で、各部に少なくともキーまたは = があって「空でない」が示されればペアが残り、「空でない」を示すものがなければ空なので除外されるようだ。</p>
                            <p class="note_contents">? → キーも値もなし<br />
                                ?a → a: (Empty)<br />
                                ?= → (Empty): (Empty)<br />
                                ?&amp; → キーも値もなし<br />
                                ?=&amp; → (Empty): (Empty)<br />
                                ?&amp;= → (Empty): (Empty)</p>
                            <p class="note_contents">HTML エンコードは、URL としてのパーズ時には考慮されない。</p>
                            <p class="note_contents">?a&amp;amp;b → a: (Empty), amp;b: (Empty)<br />
                                ?a%26b → a&amp;b: (Empty)<br />
                                ?a%26b=c%26d&amp;e → a&amp;b: c&amp;d, e: (Empty)<br />
                                ?a%26b=c%26d&amp;amp;e → a&amp;b: c&amp;d, amp;e: (Empty)</p>
                            <p class="note_contents">しかし、href に ?a%26b=c%26d&amp;amp;e を入れてリンクを開くと、ブラウザーの URL 欄の表示は ?a%26b=c%26d&amp;e になる。これは三つ目と同じで、意図した a&amp;b: c&amp;d, e: (Empty) が得られる。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">といったことからの結論は、</p>
                            <p class="note_contents">* クエリー文字列のキーや値、あるいはファイル名といった、値としての正確性が問われるものには、個別に、HTML エンコードでなく、URL エンコードを適用<br />
                                * それらを連結し、URL としたもの全体に、必要に応じてさらに HTML エンコードを適用</p>
                            <p class="note_contents">ということになる。</p>
                            <p class="note_contents">= を URL エンコードすると %3D になる。そのため、既に Key=Value と連結されているものを全体として URL エンコードすると、Key%3DValue が単一のキーとして扱われるなどする。URL エンコードは個別に、HTML エンコードは全体に。</p>
                            <p class="note_contents">Coffee Shop.jpg を href や src に入れるなら、URL エンコードで足りる。</p>
                            <p class="note_contents">HTML エンコードで変換される文字は全てが URL エンコードでも変換されるため、&lt; &gt; &amp; &quot; &#39; が href や src に入ることはない。</p>
                            <p class="note_contents">.NET の機能での URL エンコードでは半角空白が + になり、賛否両論あるようだが、+ は Google で a b を検索しても q=a+b となるなど、普通に使われている。</p>
                            <p class="note_contents">全体に HTML エンコードを適用するにおける「必要に応じる」とは、&lt; &gt; &amp; &quot; &#39; が連結時に使われたかどうかに基づく。たいてい &amp; に関することで、「個別に URL エンコードしたキーや値を &amp; でつなげたかどうか」と考えてよいだろう。不詳ならとりあえず HTML エンコードしてよい。</p>
                            <p class="note_contents">photoPage には、ディレクトリー名とファイル名をつなげて href や src に入れるところがある。そういうところでは、それぞれを念のため URL エンコードし、つなげる文字が / だと分かっているのだから全体の HTML エンコードは不要。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="5a75e81c-4b0c-4bf7-9d83-3d250be2a523" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">画像の縮小化の方法についてもう一度調べる</span>
                    <a href="#5a75e81c-4b0c-4bf7-9d83-3d250be2a523" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">Magick.NET では Resize をそのまま呼ぶのが良さそうだと判断し、コメントにもそう書いたが、どうも納得いかない。</p>
                            <p class="note_contents">bilinear と bicubic の両方でちゃんと出力できるようにしてから、いくつかの画像で目視テストを行う。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">もう一度試したところ、bicubic でも、参加者の左右の目の大きさが大きく異なるほどの問題は生じなかった。</p>
                            <p class="note_contents">コードは、次の通り。</p>
                            <p class="note_contents">using (MagickImage xImage = new MagickImage (FileAlt))<br />
                                {<br />
                                &nbsp;&nbsp;&nbsp;&nbsp;xImage.InterpolativeResize (maxWidth, maxHeight, PixelInterpolateMethod.Catrom);<br />
                                &nbsp;&nbsp;&nbsp;&nbsp;xImage.Format = MagickFormat.Jpeg;<br />
                                &nbsp;&nbsp;&nbsp;&nbsp;xImage.Quality = quality;<br />
                                &nbsp;&nbsp;&nbsp;&nbsp;xImage.Write (filePath);<br />
                                }</p>
                            <p class="note_contents">以前もこのコードだったのに左右の目の大きさが大きく異なった原因は分からない。</p>
                            <p class="note_contents">結局どちらにするかだが、bilinear が適する。</p>
                            <p class="note_contents">bicubic は、スーツの生地、内装のカーテン、土の地面、テントのカバー、チャイルドシートの座面といった、「視覚的にはほとんど分からないが、データとしてはテクスチャーがあるのだろう」というところが過度に強調される。</p>
                            <p class="note_contents">また、規則性のあるテクスチャーに、やや斜め方向の、規則性のあるモアレが生じる。縦に吊られているだけのカーテンがらせん状の模様を持ったり、ネクタイが斜線で塗りつぶされたりだ。</p>
                            <p class="note_contents">次のページの Cubic Filters のところにも、However it can overshot slightly および It is essentually an ideal self-sharpened filter の説明がある。</p>
                            <p class="note_contents">Resampling Filters -- IM v6 Examples<br />
                                <a href="https://legacy.imagemagick.org/Usage/filter/" target="_blank" class="url">https://legacy.imagemagick.org/Usage/filter/</a></p>
                            <p class="note_contents">少なくとも ImageMagick の実装では、模様のないところの処理には視覚的にほとんど違いがなく、模様のあるところだけ過度なシャープネスをかけてモアレを生じさせるようになってしまっているので、デフォルトが bilinear の Resize をそのまま使う。</p>
                            <p class="note_contents">ネットのサンプルがほぼ全てそうなのも、おそらくそういう理由だろう。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="754d1280-61bf-4eb6-a7e3-059dce77d13d" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">画像の保存時の品質について調べる</span>
                    <a href="#754d1280-61bf-4eb6-a7e3-059dce77d13d" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">Magick.NET のデフォルト値とのことである75では、.NET の倍近いファイルサイズになっているようだ。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">Magick.NET では幅 1280px で 262 KB になる画像が、.NET では幅 1600px で 218 KB になった。</p>
                            <p class="note_contents">いずれも品質は75。</p>
                            <p class="note_contents">大きさが異なるのは、後者は、自作した imgOpt というツールの現行のプロファイルによる縮小化のため。縦横が小さくてもファイルサイズが大きいのが確認できたので十分。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">Exif 情報の消し忘れと判明した。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="3d9e07f7-25e0-4afb-9cc1-bdc9faad9e9a" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">Strip により縮小版の Exif データを消す</span>
                    <a href="#3d9e07f7-25e0-4afb-9cc1-bdc9faad9e9a" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">.NET に比べてファイルサイズがかなり大きい問題は、Exif 情報が残っていたことが原因だった。おそらくサムネイルなども残っていたのだろう。Exif 情報の削除により、以前は 283 KB だった縮小版が 177 KB になった。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="a30cf76f-a74c-4edf-aa68-57bb24eaa960" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">viewport について復習</span>
                    <a href="#a30cf76f-a74c-4edf-aa68-57bb24eaa960" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">Viewport meta tag - HTML: HyperText Markup Language | MDN<br />
                                <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag" target="_blank" class="url">https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag</a></p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="6c2b6293-a0ac-4c80-aacf-0a903ac73668" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">DateTaken 部分の文字列が破損している画像ファイルでテスト</span>
                    <a href="#6c2b6293-a0ac-4c80-aacf-0a903ac73668" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">バイナリーエディターで自作することになるため、あとで。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">Exif の DateTime 型は、ASCII 文字列として &quot;YYYY:MM:DD HH:MM:SS&quot;+0x00, total 20bytes とのこと。</p>
                            <p class="note_contents">Exif file format<br />
                                <a href="https://www.media.mit.edu/pia/Research/deepview/exif.html" target="_blank" class="url">https://www.media.mit.edu/pia/Research/deepview/exif.html</a></p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">string xFilePath = @&quot;C:\Users\Hoge\Desktop\IMG_20230325_131115_1.jpg&quot;;<br />
                                byte [] xAllBytes = File.ReadAllBytes (xFilePath);</p>
                            <p class="note_contents">string xDateTakenString = new FileInfoAlt (xFilePath).LocalDateTaken.ToString (&quot;yyyy&#39;:&#39;MM&#39;:&#39;dd&#39; &#39;HH&#39;:&#39;mm&#39;:&#39;ss&#39;\x00&#39;&quot;, CultureInfo.InvariantCulture);</p>
                            <p class="note_contents">byte [] xBytesToReplaceFrom = Encoding.ASCII.GetBytes (xDateTakenString),<br />
                                &nbsp;&nbsp;&nbsp;&nbsp;xBytesToReplaceTo = Encoding.ASCII.GetBytes (xDateTakenString.Replace (&#39;:&#39;, &#39;?&#39;));</p>
                            <p class="note_contents">for (int temp = 0; temp + 20 &lt;= xAllBytes.Length; temp ++)<br />
                                {<br />
                                &nbsp;&nbsp;&nbsp;&nbsp;if (MemoryExtensions.SequenceEqual (xAllBytes.AsSpan (temp, 20), xBytesToReplaceFrom.AsSpan ()))<br />
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array.Copy (xBytesToReplaceTo, 0, xAllBytes, temp, 20);<br />
                                }</p>
                            <p class="note_contents">string xNewFilePath = Path.Join (Path.GetDirectoryName (xFilePath), $&quot;{Path.GetFileNameWithoutExtension (xFilePath)}_modified{Path.GetExtension (xFilePath)}&quot;);<br />
                                File.WriteAllBytes (xNewFilePath, xAllBytes);</p>
                            <p class="note_contents">Console.WriteLine (new FileInfoAlt (xNewFilePath).LocalDateTaken);</p>
                            <p class="note_contents">を書き、また、DateTaken を読むところで if (string.IsNullOrEmpty (xMetadata.DateTaken)) ならメッセージが表示されるようにした。</p>
                            <p class="note_contents">: から ? の置換の場合はもちろん、/ や半角空白でも DateTaken を読めず、2 → 0 にして2023年を0003年にしてもダメで、3 → 2 で2022年にする程度なら OK だった。</p>
                            <p class="note_contents">Exif のパーズは、けっこうちゃんと行われているようだ。</p>
                            <p class="note_contents">photoPage は、DateTaken が破損しているファイルなら、ファイルシステム上のタイムスタンプの値が使われるという現実的な実装になっている。</p>
                            <p class="note_contents">なお、上記のコードではファイル中の3ヶ所が置換された。WinMerge で確認できた。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="9d297870-d391-4da7-bb01-e5dc53f2d821" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">縮小版の作成前に画像を回転させる</span>
                    <a href="#9d297870-d391-4da7-bb01-e5dc53f2d821" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="8862016a-bd8a-4a03-9e90-c32a38b2d71c" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">生成される HTML の文法をチェック</span>
                    <a href="#8862016a-bd8a-4a03-9e90-c32a38b2d71c" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">The W3C Markup Validation Service<br />
                                <a href="https://validator.w3.org/" target="_blank" class="url">https://validator.w3.org/</a></p>
                            <p class="note_contents">ほかにも探す。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">Free Online HTML Validator - FreeFormatter.com<br />
                                <a href="https://www.freeformatter.com/html-validator.html" target="_blank" class="url">https://www.freeformatter.com/html-validator.html</a></p>
                            <p class="note_contents">HTML Validator Online to validate HTML data: W3C HTML Validator<br />
                                <a href="https://jsonformatter.org/html-validator" target="_blank" class="url">https://jsonformatter.org/html-validator</a></p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">三つ目では、meta を閉じていないと叱られる。自分としても、やはり開始タグだけ書いているようで気持ち悪い。</p>
                            <p class="note_contents">Mozilla が viewport のサンプルとして</p>
                            <p class="note_contents">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;</p>
                            <p class="note_contents">を出しているのも気になる。</p>
                            <p class="note_contents">Viewport meta tag - HTML: HyperText Markup Language | MDN<br />
                                <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag" target="_blank" class="url">https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag</a></p>
                            <p class="note_contents">Mozilla は、br のサンプルも、/ を入れるものは &lt;br /&gt; としている。</p>
                            <p class="note_contents">&lt;br&gt;: The Line Break element - HTML: HyperText Markup Language | MDN<br />
                                <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/br" target="_blank" class="url">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/br</a></p>
                            <p class="note_contents">やはり &lt;img /&gt; の書き方に統一する。慣れているし、視認性が高く、コストは軽微。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">img の alt も叱られるが、ファイル名を入れても仕方ないのでやめておく。</p>
                            <p class="note_contents">Google の画像検索でソースを見ると、alt=&quot;&quot; が多数見られる。そういう意味のないことは不要。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">lang を入れろと言われるのは、今回はできても、長期的に徹底できることでない。ユーザーが何語で書き込むか分からないシステムをいくつか書く可能性が高い。ページの最初から最後までが単一の言語で構成される前提の方に無理が生じてきている。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="49985607-a647-4181-9aa0-8fdf4e4240ff" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">空タグの終わりの方に / をやはり入れる</span>
                    <a href="#49985607-a647-4181-9aa0-8fdf4e4240ff" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="918c1400-8176-489d-bd2a-b5e68aca4195" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">srcZip.txt を更新</span>
                    <a href="#918c1400-8176-489d-bd2a-b5e68aca4195" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">Compiled/runtimes/linux-arm64<br />
                                Compiled/runtimes/linux-musl-x64<br />
                                Compiled/runtimes/linux-x64<br />
                                Compiled/runtimes/osx-arm64<br />
                                Compiled/runtimes/osx-x64<br />
                                Compiled/runtimes/win-arm64<br />
                                Compiled/runtimes/win-x86</p>
                            <p class="note_contents">を消す。</p>
                            <p class="note_contents">ARM64 は、スマホの CPU に使われていたり、Mac の M1 以降もそれがベースになっていたりのようで、ある程度の優位性があるようだが、まだまだ普及していない。</p>
                            <p class="note_contents">32ビットのパソコンは、まず目にしなくなっている。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="97551581-b1ef-4197-aada-bff6c4313ad7" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">0.1 としてアーカイブ</span>
                    <a href="#97551581-b1ef-4197-aada-bff6c4313ad7" class="permalink">&infin;</a>
                </div>
            </div>
            <div id="9779f484-4324-4314-a880-115d78870392" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">src や href のエンコードについて再考</span>
                    <a href="#9779f484-4324-4314-a880-115d78870392" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">tk2Text では HTML エンコードだけで十分との結論に至った。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">改めて試したところ、「ブラウザーはこう処理するだろう」という想定と異なり、%20.jpg がリンク切れになった。これを HTML エンコードに通しても変化なく、そのまま src や href に入っては URL が一致せず Not Found になる。</p>
                        </div>
                    </div>
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">現在の実装のままが良く、tk2Text の方を改めなければならないということ。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="1b4dfb2c-803d-4570-8d68-60f1a6102dd0" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">img に display: block を指定しないようにする</span>
                    <a href="#1b4dfb2c-803d-4570-8d68-60f1a6102dd0" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">tk2Text のタスクリストのログに書いた理由により、display: block をやめておき、vertical-align を指定し、なくてよさそうだが、一応、box-sizing: border-box を指定した。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="1c022e8b-b06c-44c9-9e08-74b41ede0198" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">CSS について再考</span>
                    <a href="#1c022e8b-b06c-44c9-9e08-74b41ede0198" class="permalink">&infin;</a>
                </div>
                <div class="notes">
                    <div class="note">
                        <div class="note_contents">
                            <p class="note_contents">画面が狭めだと画像の両端がウィンドウの端に接する。今になっては気になるデザインだが、時期によって揺れる主観による判断に過ぎないことで、そういうデザインであってはいけない具体的な理由はない。</p>
                            <p class="note_contents">それは div.title などの余白についても同じで、もう少し広くてよいと感じたが、直すほどのことでない。</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="1958410d-3b1a-4538-8d00-8653406d7c69" class="task done">
                <div class="task_contents">&check;
                    <span class="task_contents">v0.3 としてアーカイブ</span>
                    <a href="#1958410d-3b1a-4538-8d00-8653406d7c69" class="permalink">&infin;</a>
                </div>
            </div>
        </div>
    </body>
</html>
